{"abi":[{"type":"constructor","inputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"acceptances","inputs":[{"name":"account","type":"address","internalType":"address"},{"name":"acceptanceMessageHash","type":"bytes32","internalType":"bytes32"}],"outputs":[{"name":"accepted","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"canAddressProceed","inputs":[{"name":"sender","type":"address","internalType":"address"}],"outputs":[{"name":"accepted","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"canProceed","inputs":[],"outputs":[{"name":"accepted","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"getTextHash","inputs":[{"name":"version","type":"uint16","internalType":"uint16"}],"outputs":[{"name":"hash","type":"bytes32","internalType":"bytes32"}],"stateMutability":"view"},{"type":"function","name":"hasAcceptedHash","inputs":[{"name":"account","type":"address","internalType":"address"},{"name":"acceptanceMessageHash","type":"bytes32","internalType":"bytes32"}],"outputs":[{"name":"accepted","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"hasAcceptedVersion","inputs":[{"name":"account","type":"address","internalType":"address"},{"name":"version","type":"uint16","internalType":"uint16"}],"outputs":[{"name":"accepted","type":"bool","internalType":"bool"}],"stateMutability":"view"},{"type":"function","name":"latestAcceptanceMessageHash","inputs":[],"outputs":[{"name":"","type":"bytes32","internalType":"bytes32"}],"stateMutability":"view"},{"type":"function","name":"latestTermsOfServiceVersion","inputs":[],"outputs":[{"name":"","type":"uint16","internalType":"uint16"}],"stateMutability":"view"},{"type":"function","name":"owner","inputs":[],"outputs":[{"name":"","type":"address","internalType":"address"}],"stateMutability":"view"},{"type":"function","name":"renounceOwnership","inputs":[],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"signTermsOfServiceBehalf","inputs":[{"name":"signer","type":"address","internalType":"address"},{"name":"hash","type":"bytes32","internalType":"bytes32"},{"name":"signature","type":"bytes","internalType":"bytes"},{"name":"metadata","type":"bytes","internalType":"bytes"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"signTermsOfServiceOwn","inputs":[{"name":"hash","type":"bytes32","internalType":"bytes32"},{"name":"signature","type":"bytes","internalType":"bytes"},{"name":"metadata","type":"bytes","internalType":"bytes"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"transferOwnership","inputs":[{"name":"newOwner","type":"address","internalType":"address"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"updateTermsOfService","inputs":[{"name":"version","type":"uint16","internalType":"uint16"},{"name":"acceptanceMessageHash","type":"bytes32","internalType":"bytes32"},{"name":"acceptanceMessage","type":"string","internalType":"string"}],"outputs":[],"stateMutability":"nonpayable"},{"type":"function","name":"versions","inputs":[{"name":"version","type":"uint16","internalType":"uint16"}],"outputs":[{"name":"acceptanceMessageHash","type":"bytes32","internalType":"bytes32"}],"stateMutability":"view"},{"type":"event","name":"OwnershipTransferred","inputs":[{"name":"previousOwner","type":"address","indexed":true,"internalType":"address"},{"name":"newOwner","type":"address","indexed":true,"internalType":"address"}],"anonymous":false},{"type":"event","name":"Signed","inputs":[{"name":"signer","type":"address","indexed":false,"internalType":"address"},{"name":"version","type":"uint16","indexed":false,"internalType":"uint16"},{"name":"hash","type":"bytes32","indexed":false,"internalType":"bytes32"},{"name":"metadata","type":"bytes","indexed":false,"internalType":"bytes"}],"anonymous":false},{"type":"event","name":"UpdateTermsOfService","inputs":[{"name":"version","type":"uint16","indexed":false,"internalType":"uint16"},{"name":"acceptanceMessageHash","type":"bytes32","indexed":false,"internalType":"bytes32"},{"name":"acceptanceMessage","type":"string","indexed":false,"internalType":"string"}],"anonymous":false}],"bytecode":{"object":"0x608060405234801561001057600080fd5b5061001a3361001f565b61006f565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b610e578061007e6000396000f3fe608060405234801561001057600080fd5b50600436106100f55760003560e01c80638da5cb5b11610097578063be0fc8a611610066578063be0fc8a61461020e578063c4846df014610221578063f2fde38b14610245578063f8f584b81461025857600080fd5b80638da5cb5b1461019b578063931f45f8146101b65780639a5f773e146101e4578063b8ad591b146101ed57600080fd5b80635f145fb7116100d35780635f145fb71461014a5780635fc7e1b61461015d57806361b351631461018b578063715018a61461019357600080fd5b80633f3dea15146100fa57806349e289341461010f5780635053b56314610122575b600080fd5b61010d610108366004610a98565b61026b565b005b61010d61011d366004610b29565b610280565b610135610130366004610b9a565b6103d3565b60405190151581526020015b60405180910390f35b61010d610158366004610bbc565b610437565b61017d61016b366004610c46565b60026020526000908152604090205481565b604051908152602001610141565b610135610629565b61010d610639565b6000546040516001600160a01b039091168152602001610141565b6101356101c4366004610c61565b600160209081526000928352604080842090915290825290205460ff1681565b61017d60035481565b6004546101fb9061ffff1681565b60405161ffff9091168152602001610141565b61013561021c366004610c8b565b61064d565b61017d61022f366004610c46565b61ffff1660009081526002602052604090205490565b61010d610253366004610b9a565b6106b2565b610135610266366004610c61565b61072b565b610279338686868686610437565b5050505050565b610288610756565b60045461029a9061ffff166001610cbe565b61ffff168461ffff16146103045760405162461bcd60e51b815260206004820152602660248201527f56657273696f6e73206d757374206265207570646174656420696e6372656d656044820152656e74616c6c7960d01b60648201526084015b60405180910390fd5b60035483036103655760405162461bcd60e51b815260206004820152602760248201527f53657474696e67207468652073616d65207465726d73206f66207365727669636044820152666520747769636560c81b60648201526084016102fb565b60038390556004805461ffff191661ffff861690811790915560009081526002602052604090819020849055517f7a8fff7d237fbe760ae4f579cb79024a674b767ef612e8b5876965620604bd72906103c5908690869086908690610d17565b60405180910390a150505050565b6003546000906104255760405162461bcd60e51b815260206004820181905260248201527f5465726d73206f662073657276696365206e6f7420696e697469616c6973656460448201526064016102fb565b6104318260035461072b565b92915050565b60035485146104ae5760405162461bcd60e51b815260206004820152603760248201527f43616e6e6f74207369676e206f6c646572206f7220756e6b6e6f776e2076657260448201527f73696f6e73207465726d73206f6620736572766963657300000000000000000060648201526084016102fb565b6104fa8585858080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250506001600160a01b038b1693929150506107b0565b61053f5760405162461bcd60e51b815260206004820152601660248201527514da59db985d1d5c99481a5cc81b9bdd081d985b1a5960521b60448201526064016102fb565b6001600160a01b0386166000908152600160209081526040808320600354845290915290205460ff16156105a65760405162461bcd60e51b815260206004820152600e60248201526d105b1c9958591e481cda59db995960921b60448201526064016102fb565b6001600160a01b0386166000908152600160208181526040808420600380548652925292839020805460ff1916909217909155600454905491517f32c70fa5bb7bfd2dd4d863783422e6009fbcd3127a0e36bb0627e67ae136f9a792610619928a9261ffff909116919087908790610d3b565b60405180910390a1505050505050565b6000610634336103d3565b905090565b610641610756565b61064b6000610811565b565b61ffff8116600090815260026020526040812054806106a05760405162461bcd60e51b815260206004820152600f60248201526e27379039bab1b4103b32b939b4b7b760891b60448201526064016102fb565b6106aa848261072b565b949350505050565b6106ba610756565b6001600160a01b03811661071f5760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b60648201526084016102fb565b61072881610811565b50565b6001600160a01b03919091166000908152600160209081526040808320938352929052205460ff1690565b6000546001600160a01b0316331461064b5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016102fb565b60008060006107bf8585610861565b909250905060008160048111156107d8576107d8610d78565b1480156107f65750856001600160a01b0316826001600160a01b0316145b8061080757506108078686866108a6565b9695505050505050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b60008082516041036108975760208301516040840151606085015160001a61088b87828585610992565b9450945050505061089f565b506000905060025b9250929050565b6000806000856001600160a01b0316631626ba7e60e01b86866040516024016108d0929190610db2565b60408051601f198184030181529181526020820180516001600160e01b03166001600160e01b031990941693909317909252905161090e9190610dec565b600060405180830381855afa9150503d8060008114610949576040519150601f19603f3d011682016040523d82523d6000602084013e61094e565b606091505b509150915081801561096257506020815110155b801561080757508051630b135d3f60e11b906109879083016020908101908401610e08565b149695505050505050565b6000807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08311156109c95750600090506003610a4d565b6040805160008082526020820180845289905260ff881692820192909252606081018690526080810185905260019060a0016020604051602081039080840390855afa158015610a1d573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b038116610a4657600060019250925050610a4d565b9150600090505b94509492505050565b60008083601f840112610a6857600080fd5b50813567ffffffffffffffff811115610a8057600080fd5b60208301915083602082850101111561089f57600080fd5b600080600080600060608688031215610ab057600080fd5b85359450602086013567ffffffffffffffff80821115610acf57600080fd5b610adb89838a01610a56565b90965094506040880135915080821115610af457600080fd5b50610b0188828901610a56565b969995985093965092949392505050565b803561ffff81168114610b2457600080fd5b919050565b60008060008060608587031215610b3f57600080fd5b610b4885610b12565b935060208501359250604085013567ffffffffffffffff811115610b6b57600080fd5b610b7787828801610a56565b95989497509550505050565b80356001600160a01b0381168114610b2457600080fd5b600060208284031215610bac57600080fd5b610bb582610b83565b9392505050565b60008060008060008060808789031215610bd557600080fd5b610bde87610b83565b955060208701359450604087013567ffffffffffffffff80821115610c0257600080fd5b610c0e8a838b01610a56565b90965094506060890135915080821115610c2757600080fd5b50610c3489828a01610a56565b979a9699509497509295939492505050565b600060208284031215610c5857600080fd5b610bb582610b12565b60008060408385031215610c7457600080fd5b610c7d83610b83565b946020939093013593505050565b60008060408385031215610c9e57600080fd5b610ca783610b83565b9150610cb560208401610b12565b90509250929050565b61ffff818116838216019080821115610ce757634e487b7160e01b600052601160045260246000fd5b5092915050565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b61ffff85168152836020820152606060408201526000610807606083018486610cee565b60018060a01b038616815261ffff85166020820152836040820152608060608201526000610d6d608083018486610cee565b979650505050505050565b634e487b7160e01b600052602160045260246000fd5b60005b83811015610da9578181015183820152602001610d91565b50506000910152565b8281526040602082015260008251806040840152610dd7816060850160208701610d8e565b601f01601f1916919091016060019392505050565b60008251610dfe818460208701610d8e565b9190910192915050565b600060208284031215610e1a57600080fd5b505191905056fea26469706673582212201e9b393b95389ff694bae8b1927d520dc5b9ff0f93246fd937b771af97a0554464736f6c63430008170033","sourceMap":"666:4864:8:-:0;;;2022:31;;;;;;;;;-1:-1:-1;936:32:0;734:10:2;936:18:0;:32::i;:::-;666:4864:8;;2426:187:0;2499:16;2518:6;;-1:-1:-1;;;;;2534:17:0;;;-1:-1:-1;;;;;;2534:17:0;;;;;;2566:40;;2518:6;;;;;;;2566:40;;2499:16;2566:40;2489:124;2426:187;:::o;666:4864:8:-;;;;;;;","linkReferences":{}},"deployedBytecode":{"object":"0x608060405234801561001057600080fd5b50600436106100f55760003560e01c80638da5cb5b11610097578063be0fc8a611610066578063be0fc8a61461020e578063c4846df014610221578063f2fde38b14610245578063f8f584b81461025857600080fd5b80638da5cb5b1461019b578063931f45f8146101b65780639a5f773e146101e4578063b8ad591b146101ed57600080fd5b80635f145fb7116100d35780635f145fb71461014a5780635fc7e1b61461015d57806361b351631461018b578063715018a61461019357600080fd5b80633f3dea15146100fa57806349e289341461010f5780635053b56314610122575b600080fd5b61010d610108366004610a98565b61026b565b005b61010d61011d366004610b29565b610280565b610135610130366004610b9a565b6103d3565b60405190151581526020015b60405180910390f35b61010d610158366004610bbc565b610437565b61017d61016b366004610c46565b60026020526000908152604090205481565b604051908152602001610141565b610135610629565b61010d610639565b6000546040516001600160a01b039091168152602001610141565b6101356101c4366004610c61565b600160209081526000928352604080842090915290825290205460ff1681565b61017d60035481565b6004546101fb9061ffff1681565b60405161ffff9091168152602001610141565b61013561021c366004610c8b565b61064d565b61017d61022f366004610c46565b61ffff1660009081526002602052604090205490565b61010d610253366004610b9a565b6106b2565b610135610266366004610c61565b61072b565b610279338686868686610437565b5050505050565b610288610756565b60045461029a9061ffff166001610cbe565b61ffff168461ffff16146103045760405162461bcd60e51b815260206004820152602660248201527f56657273696f6e73206d757374206265207570646174656420696e6372656d656044820152656e74616c6c7960d01b60648201526084015b60405180910390fd5b60035483036103655760405162461bcd60e51b815260206004820152602760248201527f53657474696e67207468652073616d65207465726d73206f66207365727669636044820152666520747769636560c81b60648201526084016102fb565b60038390556004805461ffff191661ffff861690811790915560009081526002602052604090819020849055517f7a8fff7d237fbe760ae4f579cb79024a674b767ef612e8b5876965620604bd72906103c5908690869086908690610d17565b60405180910390a150505050565b6003546000906104255760405162461bcd60e51b815260206004820181905260248201527f5465726d73206f662073657276696365206e6f7420696e697469616c6973656460448201526064016102fb565b6104318260035461072b565b92915050565b60035485146104ae5760405162461bcd60e51b815260206004820152603760248201527f43616e6e6f74207369676e206f6c646572206f7220756e6b6e6f776e2076657260448201527f73696f6e73207465726d73206f6620736572766963657300000000000000000060648201526084016102fb565b6104fa8585858080601f016020809104026020016040519081016040528093929190818152602001838380828437600092019190915250506001600160a01b038b1693929150506107b0565b61053f5760405162461bcd60e51b815260206004820152601660248201527514da59db985d1d5c99481a5cc81b9bdd081d985b1a5960521b60448201526064016102fb565b6001600160a01b0386166000908152600160209081526040808320600354845290915290205460ff16156105a65760405162461bcd60e51b815260206004820152600e60248201526d105b1c9958591e481cda59db995960921b60448201526064016102fb565b6001600160a01b0386166000908152600160208181526040808420600380548652925292839020805460ff1916909217909155600454905491517f32c70fa5bb7bfd2dd4d863783422e6009fbcd3127a0e36bb0627e67ae136f9a792610619928a9261ffff909116919087908790610d3b565b60405180910390a1505050505050565b6000610634336103d3565b905090565b610641610756565b61064b6000610811565b565b61ffff8116600090815260026020526040812054806106a05760405162461bcd60e51b815260206004820152600f60248201526e27379039bab1b4103b32b939b4b7b760891b60448201526064016102fb565b6106aa848261072b565b949350505050565b6106ba610756565b6001600160a01b03811661071f5760405162461bcd60e51b815260206004820152602660248201527f4f776e61626c653a206e6577206f776e657220697320746865207a65726f206160448201526564647265737360d01b60648201526084016102fb565b61072881610811565b50565b6001600160a01b03919091166000908152600160209081526040808320938352929052205460ff1690565b6000546001600160a01b0316331461064b5760405162461bcd60e51b815260206004820181905260248201527f4f776e61626c653a2063616c6c6572206973206e6f7420746865206f776e657260448201526064016102fb565b60008060006107bf8585610861565b909250905060008160048111156107d8576107d8610d78565b1480156107f65750856001600160a01b0316826001600160a01b0316145b8061080757506108078686866108a6565b9695505050505050565b600080546001600160a01b038381166001600160a01b0319831681178455604051919092169283917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e09190a35050565b60008082516041036108975760208301516040840151606085015160001a61088b87828585610992565b9450945050505061089f565b506000905060025b9250929050565b6000806000856001600160a01b0316631626ba7e60e01b86866040516024016108d0929190610db2565b60408051601f198184030181529181526020820180516001600160e01b03166001600160e01b031990941693909317909252905161090e9190610dec565b600060405180830381855afa9150503d8060008114610949576040519150601f19603f3d011682016040523d82523d6000602084013e61094e565b606091505b509150915081801561096257506020815110155b801561080757508051630b135d3f60e11b906109879083016020908101908401610e08565b149695505050505050565b6000807f7fffffffffffffffffffffffffffffff5d576e7357a4501ddfe92f46681b20a08311156109c95750600090506003610a4d565b6040805160008082526020820180845289905260ff881692820192909252606081018690526080810185905260019060a0016020604051602081039080840390855afa158015610a1d573d6000803e3d6000fd5b5050604051601f1901519150506001600160a01b038116610a4657600060019250925050610a4d565b9150600090505b94509492505050565b60008083601f840112610a6857600080fd5b50813567ffffffffffffffff811115610a8057600080fd5b60208301915083602082850101111561089f57600080fd5b600080600080600060608688031215610ab057600080fd5b85359450602086013567ffffffffffffffff80821115610acf57600080fd5b610adb89838a01610a56565b90965094506040880135915080821115610af457600080fd5b50610b0188828901610a56565b969995985093965092949392505050565b803561ffff81168114610b2457600080fd5b919050565b60008060008060608587031215610b3f57600080fd5b610b4885610b12565b935060208501359250604085013567ffffffffffffffff811115610b6b57600080fd5b610b7787828801610a56565b95989497509550505050565b80356001600160a01b0381168114610b2457600080fd5b600060208284031215610bac57600080fd5b610bb582610b83565b9392505050565b60008060008060008060808789031215610bd557600080fd5b610bde87610b83565b955060208701359450604087013567ffffffffffffffff80821115610c0257600080fd5b610c0e8a838b01610a56565b90965094506060890135915080821115610c2757600080fd5b50610c3489828a01610a56565b979a9699509497509295939492505050565b600060208284031215610c5857600080fd5b610bb582610b12565b60008060408385031215610c7457600080fd5b610c7d83610b83565b946020939093013593505050565b60008060408385031215610c9e57600080fd5b610ca783610b83565b9150610cb560208401610b12565b90509250929050565b61ffff818116838216019080821115610ce757634e487b7160e01b600052601160045260246000fd5b5092915050565b81835281816020850137506000828201602090810191909152601f909101601f19169091010190565b61ffff85168152836020820152606060408201526000610807606083018486610cee565b60018060a01b038616815261ffff85166020820152836040820152608060608201526000610d6d608083018486610cee565b979650505050505050565b634e487b7160e01b600052602160045260246000fd5b60005b83811015610da9578181015183820152602001610d91565b50506000910152565b8281526040602082015260008251806040840152610dd7816060850160208701610d8e565b601f01601f1916919091016060019392505050565b60008251610dfe818460208701610d8e565b9190910192915050565b600060208284031215610e1a57600080fd5b505191905056fea26469706673582212201e9b393b95389ff694bae8b1927d520dc5b9ff0f93246fd937b771af97a0554464736f6c63430008170033","sourceMap":"666:4864:8:-:0;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;5344:183;;;;;;:::i;:::-;;:::i;:::-;;2841:598;;;;;;:::i;:::-;;:::i;3816:251::-;;;;;;:::i;:::-;;:::i;:::-;;;2409:14:9;;2402:22;2384:41;;2372:2;2357:18;3816:251:8;;;;;;;;4752:586;;;;;;:::i;:::-;;:::i;1394:72::-;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;3636:25:9;;;3624:2;3609:18;1394:72:8;3490:177:9;3577:111:8;;;:::i;1824:101:0:-;;;:::i;1201:85::-;1247:7;1273:6;1201:85;;-1:-1:-1;;;;;1273:6:0;;;3818:51:9;;3806:2;3791:18;1201:85:0;3672:203:9;1118:102:8;;;;;;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;1556:42;;;;;;1688:41;;;;;;;;;;;;4313:6:9;4301:19;;;4283:38;;4271:2;4256:18;1688:41:8;4139:188:9;2360:249:8;;;;;;:::i;:::-;;:::i;2241:113::-;;;;;;:::i;:::-;2330:17;;2299:12;2330:17;;;:8;:17;;;;;;;2241:113;2074:198:0;;;;;;:::i;:::-;;:::i;2059:176:8:-;;;;;;:::i;:::-;;:::i;5344:183::-;5457:63;5482:10;5494:4;5500:9;;5511:8;;5457:24;:63::i;:::-;5344:183;;;;;:::o;2841:598::-;1094:13:0;:11;:13::i;:::-;2999:27:8::1;::::0;:31:::1;::::0;:27:::1;;::::0;:31:::1;:::i;:::-;2988:42;;:7;:42;;;2980:93;;;::::0;-1:-1:-1;;;2980:93:8;;5067:2:9;2980:93:8::1;::::0;::::1;5049:21:9::0;5106:2;5086:18;;;5079:30;5145:34;5125:18;;;5118:62;-1:-1:-1;;;5196:18:9;;;5189:36;5242:19;;2980:93:8::1;;;;;;;;;3116:27;;3091:21;:52:::0;3083:104:::1;;;::::0;-1:-1:-1;;;3083:104:8;;5474:2:9;3083:104:8::1;::::0;::::1;5456:21:9::0;5513:2;5493:18;;;5486:30;5552:34;5532:18;;;5525:62;-1:-1:-1;;;5603:18:9;;;5596:37;5650:19;;3083:104:8::1;5272:403:9::0;3083:104:8::1;3197:27;:51:::0;;;3258:27:::1;:37:::0;;-1:-1:-1;;3258:37:8::1;;::::0;::::1;::::0;;::::1;::::0;;;-1:-1:-1;3305:17:8;;;:8:::1;:17;::::0;;;;;;:41;;;3361:71;::::1;::::0;::::1;::::0;3258:37;;3197:51;;3414:17;;;;3361:71:::1;:::i;:::-;;;;;;;;2841:598:::0;;;;:::o;3816:251::-;3913:27;;3880:13;;3905:86;;;;-1:-1:-1;;;3905:86:8;;6559:2:9;3905:86:8;;;6541:21:9;;;6578:18;;;6571:30;6637:34;6617:18;;;6610:62;6689:18;;3905:86:8;6357:356:9;3905:86:8;4008:52;4024:6;4032:27;;4008:15;:52::i;:::-;4001:59;3816:251;-1:-1:-1;;3816:251:8:o;4752:586::-;4900:27;;4892:4;:35;4884:103;;;;-1:-1:-1;;;4884:103:8;;6920:2:9;4884:103:8;;;6902:21:9;6959:2;6939:18;;;6932:30;6998:34;6978:18;;;6971:62;7069:25;7049:18;;;7042:53;7112:19;;4884:103:8;6718:419:9;4884:103:8;5005:43;5032:4;5038:9;;5005:43;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;;;;;;5005:26:8;;;:43;;-1:-1:-1;;5005:26:8;:43::i;:::-;4997:78;;;;-1:-1:-1;;;4997:78:8;;7344:2:9;4997:78:8;;;7326:21:9;7383:2;7363:18;;;7356:30;-1:-1:-1;;;7402:18:9;;;7395:52;7464:18;;4997:78:8;7142:346:9;4997:78:8;-1:-1:-1;;;;;5093:19:8;;;;;;:11;:19;;;;;;;;5113:27;;5093:48;;;;;;;;;;:57;5085:84;;;;-1:-1:-1;;;5085:84:8;;7695:2:9;5085:84:8;;;7677:21:9;7734:2;7714:18;;;7707:30;-1:-1:-1;;;7753:18:9;;;7746:44;7807:18;;5085:84:8;7493:338:9;5085:84:8;-1:-1:-1;;;;;5179:19:8;;;;;;5230:4;5179:19;;;;;;;;5199:27;;;5179:48;;;;;;;;:55;;-1:-1:-1;;5179:55:8;;;;;;;5264:27;;5293;;5249:82;;;;;;5191:6;;5264:27;;;;;5293;5322:8;;;;5249:82;:::i;:::-;;;;;;;;4752:586;;;;;;:::o;3577:111::-;3620:13;3652:29;3670:10;3652:17;:29::i;:::-;3645:36;;3577:111;:::o;1824:101:0:-;1094:13;:11;:13::i;:::-;1888:30:::1;1915:1;1888:18;:30::i;:::-;1824:101::o:0;2360:249:8:-;2482:17;;;2442:13;2482:17;;;:8;:17;;;;;;;2509:46;;;;-1:-1:-1;;;2509:46:8;;8540:2:9;2509:46:8;;;8522:21:9;8579:2;8559:18;;;8552:30;-1:-1:-1;;;8598:18:9;;;8591:45;8653:18;;2509:46:8;8338:339:9;2509:46:8;2572:30;2588:7;2597:4;2572:15;:30::i;:::-;2565:37;2360:249;-1:-1:-1;;;;2360:249:8:o;2074:198:0:-;1094:13;:11;:13::i;:::-;-1:-1:-1;;;;;2162:22:0;::::1;2154:73;;;::::0;-1:-1:-1;;;2154:73:0;;8884:2:9;2154:73:0::1;::::0;::::1;8866:21:9::0;8923:2;8903:18;;;8896:30;8962:34;8942:18;;;8935:62;-1:-1:-1;;;9013:18:9;;;9006:36;9059:19;;2154:73:0::1;8682:402:9::0;2154:73:0::1;2237:28;2256:8;2237:18;:28::i;:::-;2074:198:::0;:::o;2059:176:8:-;-1:-1:-1;;;;;2185:20:8;;;;2153:13;2185:20;;;:11;:20;;;;;;;;:43;;;;;;;;;;;2059:176::o;1359:130:0:-;1247:7;1273:6;-1:-1:-1;;;;;1273:6:0;734:10:2;1422:23:0;1414:68;;;;-1:-1:-1;;;1414:68:0;;9291:2:9;1414:68:0;;;9273:21:9;;;9310:18;;;9303:30;9369:34;9349:18;;;9342:62;9421:18;;1414:68:0;9089:356:9;1014:366:5;1120:4;1137:17;1156:24;1184:33;1201:4;1207:9;1184:16;:33::i;:::-;1136:81;;-1:-1:-1;1136:81:5;-1:-1:-1;1256:26:5;1247:5;:35;;;;;;;;:::i;:::-;;:58;;;;;1299:6;-1:-1:-1;;;;;1286:19:5;:9;-1:-1:-1;;;;;1286:19:5;;1247:58;1246:127;;;;1322:51;1349:6;1357:4;1363:9;1322:26;:51::i;:::-;1227:146;1014:366;-1:-1:-1;;;;;;1014:366:5:o;2426:187:0:-;2499:16;2518:6;;-1:-1:-1;;;;;2534:17:0;;;-1:-1:-1;;;;;;2534:17:0;;;;;;2566:40;;2518:6;;;;;;;2566:40;;2499:16;2566:40;2489:124;2426:187;:::o;2145:730:4:-;2226:7;2235:12;2263:9;:16;2283:2;2263:22;2259:610;;2599:4;2584:20;;2578:27;2648:4;2633:20;;2627:27;2705:4;2690:20;;2684:27;2301:9;2676:36;2746:25;2757:4;2676:36;2578:27;2627;2746:10;:25::i;:::-;2739:32;;;;;;;;;2259:610;-1:-1:-1;2818:1:4;;-1:-1:-1;2822:35:4;2259:610;2145:730;;;;;:::o;1786:473:5:-;1929:4;1946:12;1960:19;1983:6;-1:-1:-1;;;;;1983:17:5;2037:34;;;2073:4;2079:9;2014:75;;;;;;;;;:::i;:::-;;;;-1:-1:-1;;2014:75:5;;;;;;;;;;;;;;-1:-1:-1;;;;;2014:75:5;-1:-1:-1;;;;;;2014:75:5;;;;;;;;;;1983:116;;;;2014:75;1983:116;:::i;:::-;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;1945:154;;;;2117:7;:42;;;;;2157:2;2140:6;:13;:19;;2117:42;:134;;;;-1:-1:-1;2175:29:5;;-1:-1:-1;;;2216:34:5;2175:29;;;;;;;;;;;;:::i;:::-;:76;;1786:473;-1:-1:-1;;;;;;1786:473:5:o;5009:1456:4:-;5097:7;;6021:66;6008:79;;6004:161;;;-1:-1:-1;6119:1:4;;-1:-1:-1;6123:30:4;6103:51;;6004:161;6276:24;;;6259:14;6276:24;;;;;;;;;11015:25:9;;;11088:4;11076:17;;11056:18;;;11049:45;;;;11110:18;;;11103:34;;;11153:18;;;11146:34;;;6276:24:4;;10987:19:9;;6276:24:4;;;;;;;;;;;;;;;;;;;;;;;;;;;-1:-1:-1;;6276:24:4;;-1:-1:-1;;6276:24:4;;;-1:-1:-1;;;;;;;6314:20:4;;6310:101;;6366:1;6370:29;6350:50;;;;;;;6310:101;6429:6;-1:-1:-1;6437:20:4;;-1:-1:-1;5009:1456:4;;;;;;;;:::o;14:347:9:-;65:8;75:6;129:3;122:4;114:6;110:17;106:27;96:55;;147:1;144;137:12;96:55;-1:-1:-1;170:20:9;;213:18;202:30;;199:50;;;245:1;242;235:12;199:50;282:4;274:6;270:17;258:29;;334:3;327:4;318:6;310;306:19;302:30;299:39;296:59;;;351:1;348;341:12;366:785;465:6;473;481;489;497;550:2;538:9;529:7;525:23;521:32;518:52;;;566:1;563;556:12;518:52;602:9;589:23;579:33;;663:2;652:9;648:18;635:32;686:18;727:2;719:6;716:14;713:34;;;743:1;740;733:12;713:34;782:58;832:7;823:6;812:9;808:22;782:58;:::i;:::-;859:8;;-1:-1:-1;756:84:9;-1:-1:-1;947:2:9;932:18;;919:32;;-1:-1:-1;963:16:9;;;960:36;;;992:1;989;982:12;960:36;;1031:60;1083:7;1072:8;1061:9;1057:24;1031:60;:::i;:::-;366:785;;;;-1:-1:-1;366:785:9;;-1:-1:-1;1110:8:9;;1005:86;366:785;-1:-1:-1;;;366:785:9:o;1156:159::-;1223:20;;1283:6;1272:18;;1262:29;;1252:57;;1305:1;1302;1295:12;1252:57;1156:159;;;:::o;1320:550::-;1408:6;1416;1424;1432;1485:2;1473:9;1464:7;1460:23;1456:32;1453:52;;;1501:1;1498;1491:12;1453:52;1524:28;1542:9;1524:28;:::i;:::-;1514:38;;1599:2;1588:9;1584:18;1571:32;1561:42;;1654:2;1643:9;1639:18;1626:32;1681:18;1673:6;1670:30;1667:50;;;1713:1;1710;1703:12;1667:50;1752:58;1802:7;1793:6;1782:9;1778:22;1752:58;:::i;:::-;1320:550;;;;-1:-1:-1;1829:8:9;-1:-1:-1;;;;1320:550:9:o;1875:173::-;1943:20;;-1:-1:-1;;;;;1992:31:9;;1982:42;;1972:70;;2038:1;2035;2028:12;2053:186;2112:6;2165:2;2153:9;2144:7;2140:23;2136:32;2133:52;;;2181:1;2178;2171:12;2133:52;2204:29;2223:9;2204:29;:::i;:::-;2194:39;2053:186;-1:-1:-1;;;2053:186:9:o;2436:860::-;2544:6;2552;2560;2568;2576;2584;2637:3;2625:9;2616:7;2612:23;2608:33;2605:53;;;2654:1;2651;2644:12;2605:53;2677:29;2696:9;2677:29;:::i;:::-;2667:39;;2753:2;2742:9;2738:18;2725:32;2715:42;;2808:2;2797:9;2793:18;2780:32;2831:18;2872:2;2864:6;2861:14;2858:34;;;2888:1;2885;2878:12;2858:34;2927:58;2977:7;2968:6;2957:9;2953:22;2927:58;:::i;:::-;3004:8;;-1:-1:-1;2901:84:9;-1:-1:-1;3092:2:9;3077:18;;3064:32;;-1:-1:-1;3108:16:9;;;3105:36;;;3137:1;3134;3127:12;3105:36;;3176:60;3228:7;3217:8;3206:9;3202:24;3176:60;:::i;:::-;2436:860;;;;-1:-1:-1;2436:860:9;;-1:-1:-1;2436:860:9;;3255:8;;2436:860;-1:-1:-1;;;2436:860:9:o;3301:184::-;3359:6;3412:2;3400:9;3391:7;3387:23;3383:32;3380:52;;;3428:1;3425;3418:12;3380:52;3451:28;3469:9;3451:28;:::i;3880:254::-;3948:6;3956;4009:2;3997:9;3988:7;3984:23;3980:32;3977:52;;;4025:1;4022;4015:12;3977:52;4048:29;4067:9;4048:29;:::i;:::-;4038:39;4124:2;4109:18;;;;4096:32;;-1:-1:-1;;;3880:254:9:o;4332:258::-;4399:6;4407;4460:2;4448:9;4439:7;4435:23;4431:32;4428:52;;;4476:1;4473;4466:12;4428:52;4499:29;4518:9;4499:29;:::i;:::-;4489:39;;4547:37;4580:2;4569:9;4565:18;4547:37;:::i;:::-;4537:47;;4332:258;;;;;:::o;4595:265::-;4662:6;4688:10;;;4700;;;4684:27;;4723:11;;;4720:134;;;4776:10;4771:3;4767:20;4764:1;4757:31;4811:4;4808:1;4801:15;4839:4;4836:1;4829:15;4720:134;;4595:265;;;;:::o;5680:267::-;5769:6;5764:3;5757:19;5821:6;5814:5;5807:4;5802:3;5798:14;5785:43;-1:-1:-1;5873:1:9;5848:16;;;5866:4;5844:27;;;5837:38;;;;5929:2;5908:15;;;-1:-1:-1;;5904:29:9;5895:39;;;5891:50;;5680:267::o;5952:400::-;6177:6;6169;6165:19;6154:9;6147:38;6221:6;6216:2;6205:9;6201:18;6194:34;6264:2;6259;6248:9;6244:18;6237:30;6128:4;6284:62;6342:2;6331:9;6327:18;6319:6;6311;6284:62;:::i;7836:497::-;8104:1;8100;8095:3;8091:11;8087:19;8079:6;8075:32;8064:9;8057:51;8156:6;8148;8144:19;8139:2;8128:9;8124:18;8117:47;8200:6;8195:2;8184:9;8180:18;8173:34;8243:3;8238:2;8227:9;8223:18;8216:31;8038:4;8264:63;8322:3;8311:9;8307:19;8299:6;8291;8264:63;:::i;:::-;8256:71;7836:497;-1:-1:-1;;;;;;;7836:497:9:o;9450:127::-;9511:10;9506:3;9502:20;9499:1;9492:31;9542:4;9539:1;9532:15;9566:4;9563:1;9556:15;9582:250;9667:1;9677:113;9691:6;9688:1;9685:13;9677:113;;;9767:11;;;9761:18;9748:11;;;9741:39;9713:2;9706:10;9677:113;;;-1:-1:-1;;9824:1:9;9806:16;;9799:27;9582:250::o;9837:465::-;10012:6;10001:9;9994:25;10055:2;10050;10039:9;10035:18;10028:30;9975:4;10087:6;10081:13;10130:6;10125:2;10114:9;10110:18;10103:34;10146:79;10218:6;10213:2;10202:9;10198:18;10193:2;10185:6;10181:15;10146:79;:::i;:::-;10286:2;10265:15;-1:-1:-1;;10261:29:9;10246:45;;;;10293:2;10242:54;;9837:465;-1:-1:-1;;;9837:465:9:o;10307:287::-;10436:3;10474:6;10468:13;10490:66;10549:6;10544:3;10537:4;10529:6;10525:17;10490:66;:::i;:::-;10572:16;;;;;10307:287;-1:-1:-1;;10307:287:9:o;10599:184::-;10669:6;10722:2;10710:9;10701:7;10697:23;10693:32;10690:52;;;10738:1;10735;10728:12;10690:52;-1:-1:-1;10761:16:9;;10599:184;-1:-1:-1;10599:184:9:o","linkReferences":{}},"methodIdentifiers":{"acceptances(address,bytes32)":"931f45f8","canAddressProceed(address)":"5053b563","canProceed()":"61b35163","getTextHash(uint16)":"c4846df0","hasAcceptedHash(address,bytes32)":"f8f584b8","hasAcceptedVersion(address,uint16)":"be0fc8a6","latestAcceptanceMessageHash()":"9a5f773e","latestTermsOfServiceVersion()":"b8ad591b","owner()":"8da5cb5b","renounceOwnership()":"715018a6","signTermsOfServiceBehalf(address,bytes32,bytes,bytes)":"5f145fb7","signTermsOfServiceOwn(bytes32,bytes,bytes)":"3f3dea15","transferOwnership(address)":"f2fde38b","updateTermsOfService(uint16,bytes32,string)":"49e28934","versions(uint16)":"5fc7e1b6"},"rawMetadata":"{\"compiler\":{\"version\":\"0.8.23+commit.f704f362\"},\"language\":\"Solidity\",\"output\":{\"abi\":[{\"inputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"constructor\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":true,\"internalType\":\"address\",\"name\":\"previousOwner\",\"type\":\"address\"},{\"indexed\":true,\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"OwnershipTransferred\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"address\",\"name\":\"signer\",\"type\":\"address\"},{\"indexed\":false,\"internalType\":\"uint16\",\"name\":\"version\",\"type\":\"uint16\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"hash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"bytes\",\"name\":\"metadata\",\"type\":\"bytes\"}],\"name\":\"Signed\",\"type\":\"event\"},{\"anonymous\":false,\"inputs\":[{\"indexed\":false,\"internalType\":\"uint16\",\"name\":\"version\",\"type\":\"uint16\"},{\"indexed\":false,\"internalType\":\"bytes32\",\"name\":\"acceptanceMessageHash\",\"type\":\"bytes32\"},{\"indexed\":false,\"internalType\":\"string\",\"name\":\"acceptanceMessage\",\"type\":\"string\"}],\"name\":\"UpdateTermsOfService\",\"type\":\"event\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"acceptanceMessageHash\",\"type\":\"bytes32\"}],\"name\":\"acceptances\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"accepted\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"sender\",\"type\":\"address\"}],\"name\":\"canAddressProceed\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"accepted\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"canProceed\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"accepted\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint16\",\"name\":\"version\",\"type\":\"uint16\"}],\"name\":\"getTextHash\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"hash\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"acceptanceMessageHash\",\"type\":\"bytes32\"}],\"name\":\"hasAcceptedHash\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"accepted\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"account\",\"type\":\"address\"},{\"internalType\":\"uint16\",\"name\":\"version\",\"type\":\"uint16\"}],\"name\":\"hasAcceptedVersion\",\"outputs\":[{\"internalType\":\"bool\",\"name\":\"accepted\",\"type\":\"bool\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"latestAcceptanceMessageHash\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"latestTermsOfServiceVersion\",\"outputs\":[{\"internalType\":\"uint16\",\"name\":\"\",\"type\":\"uint16\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"owner\",\"outputs\":[{\"internalType\":\"address\",\"name\":\"\",\"type\":\"address\"}],\"stateMutability\":\"view\",\"type\":\"function\"},{\"inputs\":[],\"name\":\"renounceOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"signer\",\"type\":\"address\"},{\"internalType\":\"bytes32\",\"name\":\"hash\",\"type\":\"bytes32\"},{\"internalType\":\"bytes\",\"name\":\"signature\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"metadata\",\"type\":\"bytes\"}],\"name\":\"signTermsOfServiceBehalf\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"bytes32\",\"name\":\"hash\",\"type\":\"bytes32\"},{\"internalType\":\"bytes\",\"name\":\"signature\",\"type\":\"bytes\"},{\"internalType\":\"bytes\",\"name\":\"metadata\",\"type\":\"bytes\"}],\"name\":\"signTermsOfServiceOwn\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"address\",\"name\":\"newOwner\",\"type\":\"address\"}],\"name\":\"transferOwnership\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint16\",\"name\":\"version\",\"type\":\"uint16\"},{\"internalType\":\"bytes32\",\"name\":\"acceptanceMessageHash\",\"type\":\"bytes32\"},{\"internalType\":\"string\",\"name\":\"acceptanceMessage\",\"type\":\"string\"}],\"name\":\"updateTermsOfService\",\"outputs\":[],\"stateMutability\":\"nonpayable\",\"type\":\"function\"},{\"inputs\":[{\"internalType\":\"uint16\",\"name\":\"version\",\"type\":\"uint16\"}],\"name\":\"versions\",\"outputs\":[{\"internalType\":\"bytes32\",\"name\":\"acceptanceMessageHash\",\"type\":\"bytes32\"}],\"stateMutability\":\"view\",\"type\":\"function\"}],\"devdoc\":{\"kind\":\"dev\",\"methods\":{\"owner()\":{\"details\":\"Returns the address of the current owner.\"},\"renounceOwnership()\":{\"details\":\"Leaves the contract without owner. It will not be possible to call `onlyOwner` functions. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby disabling any functionality that is only available to the owner.\"},\"transferOwnership(address)\":{\"details\":\"Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner.\"}},\"version\":1},\"userdoc\":{\"kind\":\"user\",\"methods\":{\"canAddressProceed(address)\":{\"notice\":\"Can a user proceed to the next step, or they they need to sign the latest terms of service.\"},\"canProceed()\":{\"notice\":\"Can the current user proceed to the next step, or they they need to sign the latest terms of service.\"},\"signTermsOfServiceBehalf(address,bytes32,bytes,bytes)\":{\"notice\":\"Sign terms of service - Externally Owned Account sign - EIP-1271 sign - EIP-191 formatted message The user can sign multiple times. See - ECDSA tryRecover https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/cryptography/ECDSA.sol - Gnosis Safe signing example: https://github.com/safe-global/safe-eth-py/blob/master/gnosis/safe/tests/test_safe_signature.py#L195 - OpenZeppelin SignatureChecker implementation: https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/cryptography/SignatureChecker.sol\"},\"updateTermsOfService(uint16,bytes32,string)\":{\"notice\":\"Update to the new terms of service version. We do not check whether acceptance message hash matches the message, as the message string here is just for the event log keeping.\"}},\"notice\":\"Terms of service acceptance tracker Manage signatures of users of different versions of terms of service.\",\"version\":1}},\"settings\":{\"compilationTarget\":{\"src/TermsOfService.sol\":\"TermsOfService\"},\"evmVersion\":\"paris\",\"libraries\":{},\"metadata\":{\"bytecodeHash\":\"ipfs\"},\"optimizer\":{\"enabled\":true,\"runs\":200},\"remappings\":[\":@openzeppelin/=lib/openzeppelin-contracts/contracts/\",\":ds-test/=lib/forge-std/lib/ds-test/src/\",\":erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/\",\":forge-std/=lib/forge-std/src/\",\":openzeppelin-contracts/=lib/openzeppelin-contracts/\",\":openzeppelin/=lib/openzeppelin-contracts/contracts/\"]},\"sources\":{\"lib/openzeppelin-contracts/contracts/access/Ownable.sol\":{\"keccak256\":\"0xba43b97fba0d32eb4254f6a5a297b39a19a247082a02d6e69349e071e2946218\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://fc980984badf3984b6303b377711220e067722bbd6a135b24669ff5069ef9f32\",\"dweb:/ipfs/QmPHXMSXj99XjSVM21YsY6aNtLLjLVXDbyN76J5HQYvvrz\"]},\"lib/openzeppelin-contracts/contracts/interfaces/IERC1271.sol\":{\"keccak256\":\"0x0705a4b1b86d7b0bd8432118f226ba139c44b9dcaba0a6eafba2dd7d0639c544\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://c45b821ef9e882e57c256697a152e108f0f2ad6997609af8904cae99c9bd422e\",\"dweb:/ipfs/QmRKCJW6jjzR5UYZcLpGnhEJ75UVbH6EHkEa49sWx2SKng\"]},\"lib/openzeppelin-contracts/contracts/utils/Context.sol\":{\"keccak256\":\"0xa92e4fa126feb6907daa0513ddd816b2eb91f30a808de54f63c17d0e162c3439\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://a367861093b74443b137564d3f3c472f70bcf114739e62059c939f25e315706c\",\"dweb:/ipfs/Qmd7JMpcxD9RuQjK3uM3EzJUgSqdN8vzp8eytEiuwxQJ6h\"]},\"lib/openzeppelin-contracts/contracts/utils/Strings.sol\":{\"keccak256\":\"0x3088eb2868e8d13d89d16670b5f8612c4ab9ff8956272837d8e90106c59c14a0\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://b81d9ff6559ea5c47fc573e17ece6d9ba5d6839e213e6ebc3b4c5c8fe4199d7f\",\"dweb:/ipfs/QmPCW1bFisUzJkyjroY3yipwfism9RRCigCcK1hbXtVM8n\"]},\"lib/openzeppelin-contracts/contracts/utils/cryptography/ECDSA.sol\":{\"keccak256\":\"0x809bc3edb4bcbef8263fa616c1b60ee0004b50a8a1bfa164d8f57fd31f520c58\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://8b93a1e39a4a19eba1600b92c96f435442db88cac91e315c8291547a2a7bcfe2\",\"dweb:/ipfs/QmTm34KVe6uZBZwq8dZDNWwPcm24qBJdxqL3rPxBJ4LrMv\"]},\"lib/openzeppelin-contracts/contracts/utils/cryptography/SignatureChecker.sol\":{\"keccak256\":\"0x3af3ca86df39aac39a0514c84459d691434a108d2151c8ce9d69f32e315cab80\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://77d1f1cf302cd5e1dfbbb4ce3b281b28e8c52942d4319fce43df2e1b6f02a52d\",\"dweb:/ipfs/QmT6ZXStmK3Knhh9BokeVHQ9HXTBZNgL3Eb1ar1cYg1hWy\"]},\"lib/openzeppelin-contracts/contracts/utils/math/Math.sol\":{\"keccak256\":\"0xe4455ac1eb7fc497bb7402579e7b4d64d928b846fce7d2b6fde06d366f21c2b3\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://cc8841b3cd48ad125e2f46323c8bad3aa0e88e399ec62acb9e57efa7e7c8058c\",\"dweb:/ipfs/QmSqE4mXHA2BXW58deDbXE8MTcsL5JSKNDbm23sVQxRLPS\"]},\"lib/openzeppelin-contracts/contracts/utils/math/SignedMath.sol\":{\"keccak256\":\"0xf92515413956f529d95977adc9b0567d583c6203fc31ab1c23824c35187e3ddc\",\"license\":\"MIT\",\"urls\":[\"bzz-raw://c50fcc459e49a9858b6d8ad5f911295cb7c9ab57567845a250bf0153f84a95c7\",\"dweb:/ipfs/QmcEW85JRzvDkQggxiBBLVAasXWdkhEysqypj9EaB6H2g6\"]},\"src/TermsOfService.sol\":{\"keccak256\":\"0x452a40320aa94ce028ed2ff72a32b1d5cfefce333ac94ee123d75bd87e589012\",\"license\":\"GPL-3.0\",\"urls\":[\"bzz-raw://c700dc1113c0078f000e1456effffaa000dcf2ebb457f4a08a278b6921866d50\",\"dweb:/ipfs/QmaPmL2LJVgAec75dfjs9utXxWZe2pcMrRy9ysnq3vr1AM\"]}},\"version\":1}","metadata":{"compiler":{"version":"0.8.23+commit.f704f362"},"language":"Solidity","output":{"abi":[{"inputs":[],"stateMutability":"nonpayable","type":"constructor"},{"inputs":[{"internalType":"address","name":"previousOwner","type":"address","indexed":true},{"internalType":"address","name":"newOwner","type":"address","indexed":true}],"type":"event","name":"OwnershipTransferred","anonymous":false},{"inputs":[{"internalType":"address","name":"signer","type":"address","indexed":false},{"internalType":"uint16","name":"version","type":"uint16","indexed":false},{"internalType":"bytes32","name":"hash","type":"bytes32","indexed":false},{"internalType":"bytes","name":"metadata","type":"bytes","indexed":false}],"type":"event","name":"Signed","anonymous":false},{"inputs":[{"internalType":"uint16","name":"version","type":"uint16","indexed":false},{"internalType":"bytes32","name":"acceptanceMessageHash","type":"bytes32","indexed":false},{"internalType":"string","name":"acceptanceMessage","type":"string","indexed":false}],"type":"event","name":"UpdateTermsOfService","anonymous":false},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"bytes32","name":"acceptanceMessageHash","type":"bytes32"}],"stateMutability":"view","type":"function","name":"acceptances","outputs":[{"internalType":"bool","name":"accepted","type":"bool"}]},{"inputs":[{"internalType":"address","name":"sender","type":"address"}],"stateMutability":"view","type":"function","name":"canAddressProceed","outputs":[{"internalType":"bool","name":"accepted","type":"bool"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"canProceed","outputs":[{"internalType":"bool","name":"accepted","type":"bool"}]},{"inputs":[{"internalType":"uint16","name":"version","type":"uint16"}],"stateMutability":"view","type":"function","name":"getTextHash","outputs":[{"internalType":"bytes32","name":"hash","type":"bytes32"}]},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"bytes32","name":"acceptanceMessageHash","type":"bytes32"}],"stateMutability":"view","type":"function","name":"hasAcceptedHash","outputs":[{"internalType":"bool","name":"accepted","type":"bool"}]},{"inputs":[{"internalType":"address","name":"account","type":"address"},{"internalType":"uint16","name":"version","type":"uint16"}],"stateMutability":"view","type":"function","name":"hasAcceptedVersion","outputs":[{"internalType":"bool","name":"accepted","type":"bool"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"latestAcceptanceMessageHash","outputs":[{"internalType":"bytes32","name":"","type":"bytes32"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"latestTermsOfServiceVersion","outputs":[{"internalType":"uint16","name":"","type":"uint16"}]},{"inputs":[],"stateMutability":"view","type":"function","name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}]},{"inputs":[],"stateMutability":"nonpayable","type":"function","name":"renounceOwnership"},{"inputs":[{"internalType":"address","name":"signer","type":"address"},{"internalType":"bytes32","name":"hash","type":"bytes32"},{"internalType":"bytes","name":"signature","type":"bytes"},{"internalType":"bytes","name":"metadata","type":"bytes"}],"stateMutability":"nonpayable","type":"function","name":"signTermsOfServiceBehalf"},{"inputs":[{"internalType":"bytes32","name":"hash","type":"bytes32"},{"internalType":"bytes","name":"signature","type":"bytes"},{"internalType":"bytes","name":"metadata","type":"bytes"}],"stateMutability":"nonpayable","type":"function","name":"signTermsOfServiceOwn"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"stateMutability":"nonpayable","type":"function","name":"transferOwnership"},{"inputs":[{"internalType":"uint16","name":"version","type":"uint16"},{"internalType":"bytes32","name":"acceptanceMessageHash","type":"bytes32"},{"internalType":"string","name":"acceptanceMessage","type":"string"}],"stateMutability":"nonpayable","type":"function","name":"updateTermsOfService"},{"inputs":[{"internalType":"uint16","name":"version","type":"uint16"}],"stateMutability":"view","type":"function","name":"versions","outputs":[{"internalType":"bytes32","name":"acceptanceMessageHash","type":"bytes32"}]}],"devdoc":{"kind":"dev","methods":{"owner()":{"details":"Returns the address of the current owner."},"renounceOwnership()":{"details":"Leaves the contract without owner. It will not be possible to call `onlyOwner` functions. Can only be called by the current owner. NOTE: Renouncing ownership will leave the contract without an owner, thereby disabling any functionality that is only available to the owner."},"transferOwnership(address)":{"details":"Transfers ownership of the contract to a new account (`newOwner`). Can only be called by the current owner."}},"version":1},"userdoc":{"kind":"user","methods":{"canAddressProceed(address)":{"notice":"Can a user proceed to the next step, or they they need to sign the latest terms of service."},"canProceed()":{"notice":"Can the current user proceed to the next step, or they they need to sign the latest terms of service."},"signTermsOfServiceBehalf(address,bytes32,bytes,bytes)":{"notice":"Sign terms of service - Externally Owned Account sign - EIP-1271 sign - EIP-191 formatted message The user can sign multiple times. See - ECDSA tryRecover https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/cryptography/ECDSA.sol - Gnosis Safe signing example: https://github.com/safe-global/safe-eth-py/blob/master/gnosis/safe/tests/test_safe_signature.py#L195 - OpenZeppelin SignatureChecker implementation: https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/cryptography/SignatureChecker.sol"},"updateTermsOfService(uint16,bytes32,string)":{"notice":"Update to the new terms of service version. We do not check whether acceptance message hash matches the message, as the message string here is just for the event log keeping."}},"version":1}},"settings":{"remappings":["@openzeppelin/=lib/openzeppelin-contracts/contracts/","ds-test/=lib/forge-std/lib/ds-test/src/","erc4626-tests/=lib/openzeppelin-contracts/lib/erc4626-tests/","forge-std/=lib/forge-std/src/","openzeppelin-contracts/=lib/openzeppelin-contracts/","openzeppelin/=lib/openzeppelin-contracts/contracts/"],"optimizer":{"enabled":true,"runs":200},"metadata":{"bytecodeHash":"ipfs"},"compilationTarget":{"src/TermsOfService.sol":"TermsOfService"},"evmVersion":"paris","libraries":{}},"sources":{"lib/openzeppelin-contracts/contracts/access/Ownable.sol":{"keccak256":"0xba43b97fba0d32eb4254f6a5a297b39a19a247082a02d6e69349e071e2946218","urls":["bzz-raw://fc980984badf3984b6303b377711220e067722bbd6a135b24669ff5069ef9f32","dweb:/ipfs/QmPHXMSXj99XjSVM21YsY6aNtLLjLVXDbyN76J5HQYvvrz"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/interfaces/IERC1271.sol":{"keccak256":"0x0705a4b1b86d7b0bd8432118f226ba139c44b9dcaba0a6eafba2dd7d0639c544","urls":["bzz-raw://c45b821ef9e882e57c256697a152e108f0f2ad6997609af8904cae99c9bd422e","dweb:/ipfs/QmRKCJW6jjzR5UYZcLpGnhEJ75UVbH6EHkEa49sWx2SKng"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/Context.sol":{"keccak256":"0xa92e4fa126feb6907daa0513ddd816b2eb91f30a808de54f63c17d0e162c3439","urls":["bzz-raw://a367861093b74443b137564d3f3c472f70bcf114739e62059c939f25e315706c","dweb:/ipfs/Qmd7JMpcxD9RuQjK3uM3EzJUgSqdN8vzp8eytEiuwxQJ6h"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/Strings.sol":{"keccak256":"0x3088eb2868e8d13d89d16670b5f8612c4ab9ff8956272837d8e90106c59c14a0","urls":["bzz-raw://b81d9ff6559ea5c47fc573e17ece6d9ba5d6839e213e6ebc3b4c5c8fe4199d7f","dweb:/ipfs/QmPCW1bFisUzJkyjroY3yipwfism9RRCigCcK1hbXtVM8n"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/cryptography/ECDSA.sol":{"keccak256":"0x809bc3edb4bcbef8263fa616c1b60ee0004b50a8a1bfa164d8f57fd31f520c58","urls":["bzz-raw://8b93a1e39a4a19eba1600b92c96f435442db88cac91e315c8291547a2a7bcfe2","dweb:/ipfs/QmTm34KVe6uZBZwq8dZDNWwPcm24qBJdxqL3rPxBJ4LrMv"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/cryptography/SignatureChecker.sol":{"keccak256":"0x3af3ca86df39aac39a0514c84459d691434a108d2151c8ce9d69f32e315cab80","urls":["bzz-raw://77d1f1cf302cd5e1dfbbb4ce3b281b28e8c52942d4319fce43df2e1b6f02a52d","dweb:/ipfs/QmT6ZXStmK3Knhh9BokeVHQ9HXTBZNgL3Eb1ar1cYg1hWy"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/math/Math.sol":{"keccak256":"0xe4455ac1eb7fc497bb7402579e7b4d64d928b846fce7d2b6fde06d366f21c2b3","urls":["bzz-raw://cc8841b3cd48ad125e2f46323c8bad3aa0e88e399ec62acb9e57efa7e7c8058c","dweb:/ipfs/QmSqE4mXHA2BXW58deDbXE8MTcsL5JSKNDbm23sVQxRLPS"],"license":"MIT"},"lib/openzeppelin-contracts/contracts/utils/math/SignedMath.sol":{"keccak256":"0xf92515413956f529d95977adc9b0567d583c6203fc31ab1c23824c35187e3ddc","urls":["bzz-raw://c50fcc459e49a9858b6d8ad5f911295cb7c9ab57567845a250bf0153f84a95c7","dweb:/ipfs/QmcEW85JRzvDkQggxiBBLVAasXWdkhEysqypj9EaB6H2g6"],"license":"MIT"},"src/TermsOfService.sol":{"keccak256":"0x452a40320aa94ce028ed2ff72a32b1d5cfefce333ac94ee123d75bd87e589012","urls":["bzz-raw://c700dc1113c0078f000e1456effffaa000dcf2ebb457f4a08a278b6921866d50","dweb:/ipfs/QmaPmL2LJVgAec75dfjs9utXxWZe2pcMrRy9ysnq3vr1AM"],"license":"GPL-3.0"}},"version":1},"ast":{"absolutePath":"src/TermsOfService.sol","id":2110,"exportedSymbols":{"Context":[156],"ECDSA":[751],"IERC1271":[126],"ITermsOfService":[1845],"Math":[1716],"Ownable":[112],"SignatureChecker":[850],"SignedMath":[1821],"Strings":[385],"TermsOfService":[2109]},"nodeType":"SourceUnit","src":"37:5494:8","nodes":[{"id":1823,"nodeType":"PragmaDirective","src":"37:24:8","nodes":[],"literals":["solidity","^","0.8",".23"]},{"id":1824,"nodeType":"ImportDirective","src":"63:42:8","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/access/Ownable.sol","file":"@openzeppelin/access/Ownable.sol","nameLocation":"-1:-1:-1","scope":2110,"sourceUnit":113,"symbolAliases":[],"unitAlias":""},{"id":1825,"nodeType":"ImportDirective","src":"203:63:8","nodes":[],"absolutePath":"lib/openzeppelin-contracts/contracts/utils/cryptography/SignatureChecker.sol","file":"@openzeppelin/utils/cryptography/SignatureChecker.sol","nameLocation":"-1:-1:-1","scope":2110,"sourceUnit":851,"symbolAliases":[],"unitAlias":""},{"id":1845,"nodeType":"ContractDefinition","src":"302:239:8","nodes":[{"id":1833,"nodeType":"FunctionDefinition","src":"334:76:8","nodes":[],"functionSelector":"5053b563","implemented":false,"kind":"function","modifiers":[],"name":"canAddressProceed","nameLocation":"343:17:8","parameters":{"id":1829,"nodeType":"ParameterList","parameters":[{"constant":false,"id":1828,"mutability":"mutable","name":"sender","nameLocation":"369:6:8","nodeType":"VariableDeclaration","scope":1833,"src":"361:14:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":1827,"name":"address","nodeType":"ElementaryTypeName","src":"361:7:8","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"360:16:8"},"returnParameters":{"id":1832,"nodeType":"ParameterList","parameters":[{"constant":false,"id":1831,"mutability":"mutable","name":"accepted","nameLocation":"400:8:8","nodeType":"VariableDeclaration","scope":1833,"src":"395:13:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":1830,"name":"bool","nodeType":"ElementaryTypeName","src":"395:4:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"394:15:8"},"scope":1845,"stateMutability":"nonpayable","virtual":false,"visibility":"external"},{"id":1844,"nodeType":"FunctionDefinition","src":"415:124:8","nodes":[],"functionSelector":"5f145fb7","implemented":false,"kind":"function","modifiers":[],"name":"signTermsOfServiceBehalf","nameLocation":"424:24:8","parameters":{"id":1842,"nodeType":"ParameterList","parameters":[{"constant":false,"id":1835,"mutability":"mutable","name":"signer","nameLocation":"457:6:8","nodeType":"VariableDeclaration","scope":1844,"src":"449:14:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":1834,"name":"address","nodeType":"ElementaryTypeName","src":"449:7:8","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":1837,"mutability":"mutable","name":"hash","nameLocation":"473:4:8","nodeType":"VariableDeclaration","scope":1844,"src":"465:12:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":1836,"name":"bytes32","nodeType":"ElementaryTypeName","src":"465:7:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"},{"constant":false,"id":1839,"mutability":"mutable","name":"signature","nameLocation":"494:9:8","nodeType":"VariableDeclaration","scope":1844,"src":"479:24:8","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes"},"typeName":{"id":1838,"name":"bytes","nodeType":"ElementaryTypeName","src":"479:5:8","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"},{"constant":false,"id":1841,"mutability":"mutable","name":"metadata","nameLocation":"520:8:8","nodeType":"VariableDeclaration","scope":1844,"src":"505:23:8","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes"},"typeName":{"id":1840,"name":"bytes","nodeType":"ElementaryTypeName","src":"505:5:8","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"}],"src":"448:81:8"},"returnParameters":{"id":1843,"nodeType":"ParameterList","parameters":[],"src":"538:0:8"},"scope":1845,"stateMutability":"nonpayable","virtual":false,"visibility":"external"}],"abstract":false,"baseContracts":[],"canonicalName":"ITermsOfService","contractDependencies":[],"contractKind":"interface","documentation":{"id":1826,"nodeType":"StructuredDocumentation","src":"269:32:8","text":" Minimal MVP interface"},"fullyImplemented":false,"linearizedBaseContracts":[1845],"name":"ITermsOfService","nameLocation":"312:15:8","scope":2110,"usedErrors":[],"usedEvents":[]},{"id":2109,"nodeType":"ContractDefinition","src":"666:4864:8","nodes":[{"id":1853,"nodeType":"UsingForDirective","src":"816:35:8","nodes":[],"global":false,"libraryName":{"id":1851,"name":"SignatureChecker","nameLocations":["822:16:8"],"nodeType":"IdentifierPath","referencedDeclaration":850,"src":"822:16:8"},"typeName":{"id":1852,"name":"address","nodeType":"ElementaryTypeName","src":"843:7:8","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}},{"id":1859,"nodeType":"VariableDeclaration","src":"1118:102:8","nodes":[],"constant":false,"functionSelector":"931f45f8","mutability":"mutable","name":"acceptances","nameLocation":"1209:11:8","scope":2109,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_bytes32_$_t_bool_$_$","typeString":"mapping(address => mapping(bytes32 => bool))"},"typeName":{"id":1858,"keyName":"account","keyNameLocation":"1134:7:8","keyType":{"id":1854,"name":"address","nodeType":"ElementaryTypeName","src":"1126:7:8","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"nodeType":"Mapping","src":"1118:83:8","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_bytes32_$_t_bool_$_$","typeString":"mapping(address => mapping(bytes32 => bool))"},"valueName":"","valueNameLocation":"-1:-1:-1","valueType":{"id":1857,"keyName":"acceptanceMessageHash","keyNameLocation":"1161:21:8","keyType":{"id":1855,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1153:7:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Mapping","src":"1145:55:8","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_bool_$","typeString":"mapping(bytes32 => bool)"},"valueName":"accepted","valueNameLocation":"1191:8:8","valueType":{"id":1856,"name":"bool","nodeType":"ElementaryTypeName","src":"1186:4:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}}}},"visibility":"public"},{"id":1863,"nodeType":"VariableDeclaration","src":"1394:72:8","nodes":[],"constant":false,"functionSelector":"5fc7e1b6","mutability":"mutable","name":"versions","nameLocation":"1458:8:8","scope":2109,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint16_$_t_bytes32_$","typeString":"mapping(uint16 => bytes32)"},"typeName":{"id":1862,"keyName":"version","keyNameLocation":"1409:7:8","keyType":{"id":1860,"name":"uint16","nodeType":"ElementaryTypeName","src":"1402:6:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},"nodeType":"Mapping","src":"1394:56:8","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint16_$_t_bytes32_$","typeString":"mapping(uint16 => bytes32)"},"valueName":"acceptanceMessageHash","valueNameLocation":"1428:21:8","valueType":{"id":1861,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1420:7:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}},"visibility":"public"},{"id":1865,"nodeType":"VariableDeclaration","src":"1556:42:8","nodes":[],"constant":false,"functionSelector":"9a5f773e","mutability":"mutable","name":"latestAcceptanceMessageHash","nameLocation":"1571:27:8","scope":2109,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":1864,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1556:7:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"public"},{"id":1867,"nodeType":"VariableDeclaration","src":"1688:41:8","nodes":[],"constant":false,"functionSelector":"b8ad591b","mutability":"mutable","name":"latestTermsOfServiceVersion","nameLocation":"1702:27:8","scope":2109,"stateVariable":true,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"},"typeName":{"id":1866,"name":"uint16","nodeType":"ElementaryTypeName","src":"1688:6:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},"visibility":"public"},{"id":1875,"nodeType":"EventDefinition","src":"1778:100:8","nodes":[],"anonymous":false,"eventSelector":"7a8fff7d237fbe760ae4f579cb79024a674b767ef612e8b5876965620604bd72","name":"UpdateTermsOfService","nameLocation":"1784:20:8","parameters":{"id":1874,"nodeType":"ParameterList","parameters":[{"constant":false,"id":1869,"indexed":false,"mutability":"mutable","name":"version","nameLocation":"1812:7:8","nodeType":"VariableDeclaration","scope":1875,"src":"1805:14:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"},"typeName":{"id":1868,"name":"uint16","nodeType":"ElementaryTypeName","src":"1805:6:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},"visibility":"internal"},{"constant":false,"id":1871,"indexed":false,"mutability":"mutable","name":"acceptanceMessageHash","nameLocation":"1829:21:8","nodeType":"VariableDeclaration","scope":1875,"src":"1821:29:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":1870,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1821:7:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"},{"constant":false,"id":1873,"indexed":false,"mutability":"mutable","name":"acceptanceMessage","nameLocation":"1859:17:8","nodeType":"VariableDeclaration","scope":1875,"src":"1852:24:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_string_memory_ptr","typeString":"string"},"typeName":{"id":1872,"name":"string","nodeType":"ElementaryTypeName","src":"1852:6:8","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"1804:73:8"}},{"id":1885,"nodeType":"EventDefinition","src":"1941:75:8","nodes":[],"anonymous":false,"eventSelector":"32c70fa5bb7bfd2dd4d863783422e6009fbcd3127a0e36bb0627e67ae136f9a7","name":"Signed","nameLocation":"1947:6:8","parameters":{"id":1884,"nodeType":"ParameterList","parameters":[{"constant":false,"id":1877,"indexed":false,"mutability":"mutable","name":"signer","nameLocation":"1962:6:8","nodeType":"VariableDeclaration","scope":1885,"src":"1954:14:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":1876,"name":"address","nodeType":"ElementaryTypeName","src":"1954:7:8","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":1879,"indexed":false,"mutability":"mutable","name":"version","nameLocation":"1977:7:8","nodeType":"VariableDeclaration","scope":1885,"src":"1970:14:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"},"typeName":{"id":1878,"name":"uint16","nodeType":"ElementaryTypeName","src":"1970:6:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},"visibility":"internal"},{"constant":false,"id":1881,"indexed":false,"mutability":"mutable","name":"hash","nameLocation":"1994:4:8","nodeType":"VariableDeclaration","scope":1885,"src":"1986:12:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":1880,"name":"bytes32","nodeType":"ElementaryTypeName","src":"1986:7:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"},{"constant":false,"id":1883,"indexed":false,"mutability":"mutable","name":"metadata","nameLocation":"2006:8:8","nodeType":"VariableDeclaration","scope":1885,"src":"2000:14:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes_memory_ptr","typeString":"bytes"},"typeName":{"id":1882,"name":"bytes","nodeType":"ElementaryTypeName","src":"2000:5:8","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"}],"src":"1953:62:8"}},{"id":1891,"nodeType":"FunctionDefinition","src":"2022:31:8","nodes":[],"body":{"id":1890,"nodeType":"Block","src":"2046:7:8","nodes":[],"statements":[]},"implemented":true,"kind":"constructor","modifiers":[{"arguments":[],"id":1888,"kind":"baseConstructorSpecifier","modifierName":{"id":1887,"name":"Ownable","nameLocations":["2036:7:8"],"nodeType":"IdentifierPath","referencedDeclaration":112,"src":"2036:7:8"},"nodeType":"ModifierInvocation","src":"2036:9:8"}],"name":"","nameLocation":"-1:-1:-1","parameters":{"id":1886,"nodeType":"ParameterList","parameters":[],"src":"2033:2:8"},"returnParameters":{"id":1889,"nodeType":"ParameterList","parameters":[],"src":"2046:0:8"},"scope":2109,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":1907,"nodeType":"FunctionDefinition","src":"2059:176:8","nodes":[],"body":{"id":1906,"nodeType":"Block","src":"2168:67:8","nodes":[],"statements":[{"expression":{"baseExpression":{"baseExpression":{"id":1900,"name":"acceptances","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1859,"src":"2185:11:8","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_bytes32_$_t_bool_$_$","typeString":"mapping(address => mapping(bytes32 => bool))"}},"id":1902,"indexExpression":{"id":1901,"name":"account","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1893,"src":"2197:7:8","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2185:20:8","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_bool_$","typeString":"mapping(bytes32 => bool)"}},"id":1904,"indexExpression":{"id":1903,"name":"acceptanceMessageHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1895,"src":"2206:21:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2185:43:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"functionReturnParameters":1899,"id":1905,"nodeType":"Return","src":"2178:50:8"}]},"functionSelector":"f8f584b8","implemented":true,"kind":"function","modifiers":[],"name":"hasAcceptedHash","nameLocation":"2068:15:8","parameters":{"id":1896,"nodeType":"ParameterList","parameters":[{"constant":false,"id":1893,"mutability":"mutable","name":"account","nameLocation":"2092:7:8","nodeType":"VariableDeclaration","scope":1907,"src":"2084:15:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":1892,"name":"address","nodeType":"ElementaryTypeName","src":"2084:7:8","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":1895,"mutability":"mutable","name":"acceptanceMessageHash","nameLocation":"2109:21:8","nodeType":"VariableDeclaration","scope":1907,"src":"2101:29:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":1894,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2101:7:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"}],"src":"2083:48:8"},"returnParameters":{"id":1899,"nodeType":"ParameterList","parameters":[{"constant":false,"id":1898,"mutability":"mutable","name":"accepted","nameLocation":"2158:8:8","nodeType":"VariableDeclaration","scope":1907,"src":"2153:13:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":1897,"name":"bool","nodeType":"ElementaryTypeName","src":"2153:4:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"2152:15:8"},"scope":2109,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":1919,"nodeType":"FunctionDefinition","src":"2241:113:8","nodes":[],"body":{"id":1918,"nodeType":"Block","src":"2313:41:8","nodes":[],"statements":[{"expression":{"baseExpression":{"id":1914,"name":"versions","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1863,"src":"2330:8:8","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint16_$_t_bytes32_$","typeString":"mapping(uint16 => bytes32)"}},"id":1916,"indexExpression":{"id":1915,"name":"version","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1909,"src":"2339:7:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2330:17:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"functionReturnParameters":1913,"id":1917,"nodeType":"Return","src":"2323:24:8"}]},"functionSelector":"c4846df0","implemented":true,"kind":"function","modifiers":[],"name":"getTextHash","nameLocation":"2250:11:8","parameters":{"id":1910,"nodeType":"ParameterList","parameters":[{"constant":false,"id":1909,"mutability":"mutable","name":"version","nameLocation":"2269:7:8","nodeType":"VariableDeclaration","scope":1919,"src":"2262:14:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"},"typeName":{"id":1908,"name":"uint16","nodeType":"ElementaryTypeName","src":"2262:6:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},"visibility":"internal"}],"src":"2261:16:8"},"returnParameters":{"id":1913,"nodeType":"ParameterList","parameters":[{"constant":false,"id":1912,"mutability":"mutable","name":"hash","nameLocation":"2307:4:8","nodeType":"VariableDeclaration","scope":1919,"src":"2299:12:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":1911,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2299:7:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"}],"src":"2298:14:8"},"scope":2109,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":1950,"nodeType":"FunctionDefinition","src":"2360:249:8","nodes":[],"body":{"id":1949,"nodeType":"Block","src":"2457:152:8","nodes":[],"statements":[{"assignments":[1929],"declarations":[{"constant":false,"id":1929,"mutability":"mutable","name":"hash","nameLocation":"2475:4:8","nodeType":"VariableDeclaration","scope":1949,"src":"2467:12:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":1928,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2467:7:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"}],"id":1933,"initialValue":{"baseExpression":{"id":1930,"name":"versions","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1863,"src":"2482:8:8","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint16_$_t_bytes32_$","typeString":"mapping(uint16 => bytes32)"}},"id":1932,"indexExpression":{"id":1931,"name":"version","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1923,"src":"2491:7:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"2482:17:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"VariableDeclarationStatement","src":"2467:32:8"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"id":1940,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":1935,"name":"hash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1929,"src":"2517:4:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":1938,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"2533:1:8","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":1937,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"2525:7:8","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes32_$","typeString":"type(bytes32)"},"typeName":{"id":1936,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2525:7:8","typeDescriptions":{}}},"id":1939,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2525:10:8","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"2517:18:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"4e6f20737563682076657273696f6e","id":1941,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"2537:17:8","typeDescriptions":{"typeIdentifier":"t_stringliteral_5cbac6ec2b4a5b792f4ef6dc32ffa8fa725bada96b8524c4a39d251097192ca2","typeString":"literal_string \"No such version\""},"value":"No such version"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_5cbac6ec2b4a5b792f4ef6dc32ffa8fa725bada96b8524c4a39d251097192ca2","typeString":"literal_string \"No such version\""}],"id":1934,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"2509:7:8","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":1942,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2509:46:8","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":1943,"nodeType":"ExpressionStatement","src":"2509:46:8"},{"expression":{"arguments":[{"id":1945,"name":"account","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1921,"src":"2588:7:8","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":1946,"name":"hash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1929,"src":"2597:4:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":1944,"name":"hasAcceptedHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1907,"src":"2572:15:8","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_address_$_t_bytes32_$returns$_t_bool_$","typeString":"function (address,bytes32) view returns (bool)"}},"id":1947,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2572:30:8","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"functionReturnParameters":1927,"id":1948,"nodeType":"Return","src":"2565:37:8"}]},"functionSelector":"be0fc8a6","implemented":true,"kind":"function","modifiers":[],"name":"hasAcceptedVersion","nameLocation":"2369:18:8","parameters":{"id":1924,"nodeType":"ParameterList","parameters":[{"constant":false,"id":1921,"mutability":"mutable","name":"account","nameLocation":"2396:7:8","nodeType":"VariableDeclaration","scope":1950,"src":"2388:15:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":1920,"name":"address","nodeType":"ElementaryTypeName","src":"2388:7:8","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":1923,"mutability":"mutable","name":"version","nameLocation":"2412:7:8","nodeType":"VariableDeclaration","scope":1950,"src":"2405:14:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"},"typeName":{"id":1922,"name":"uint16","nodeType":"ElementaryTypeName","src":"2405:6:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},"visibility":"internal"}],"src":"2387:33:8"},"returnParameters":{"id":1927,"nodeType":"ParameterList","parameters":[{"constant":false,"id":1926,"mutability":"mutable","name":"accepted","nameLocation":"2447:8:8","nodeType":"VariableDeclaration","scope":1950,"src":"2442:13:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":1925,"name":"bool","nodeType":"ElementaryTypeName","src":"2442:4:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"2441:15:8"},"scope":2109,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":1999,"nodeType":"FunctionDefinition","src":"2841:598:8","nodes":[],"body":{"id":1998,"nodeType":"Block","src":"2970:469:8","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_uint16","typeString":"uint16"},"id":1967,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":1963,"name":"version","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1953,"src":"2988:7:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"commonType":{"typeIdentifier":"t_uint16","typeString":"uint16"},"id":1966,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":1964,"name":"latestTermsOfServiceVersion","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1867,"src":"2999:27:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},"nodeType":"BinaryOperation","operator":"+","rightExpression":{"hexValue":"31","id":1965,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3029:1:8","typeDescriptions":{"typeIdentifier":"t_rational_1_by_1","typeString":"int_const 1"},"value":"1"},"src":"2999:31:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},"src":"2988:42:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"56657273696f6e73206d757374206265207570646174656420696e6372656d656e74616c6c79","id":1968,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"3032:40:8","typeDescriptions":{"typeIdentifier":"t_stringliteral_0ff682432117338282252fba0b62cc61c31a83ae01943f5150417c66b5e37af9","typeString":"literal_string \"Versions must be updated incrementally\""},"value":"Versions must be updated incrementally"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_0ff682432117338282252fba0b62cc61c31a83ae01943f5150417c66b5e37af9","typeString":"literal_string \"Versions must be updated incrementally\""}],"id":1962,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"2980:7:8","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":1969,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"2980:93:8","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":1970,"nodeType":"ExpressionStatement","src":"2980:93:8"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"id":1974,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":1972,"name":"acceptanceMessageHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1955,"src":"3091:21:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"id":1973,"name":"latestAcceptanceMessageHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1865,"src":"3116:27:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"3091:52:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"53657474696e67207468652073616d65207465726d73206f662073657276696365207477696365","id":1975,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"3145:41:8","typeDescriptions":{"typeIdentifier":"t_stringliteral_85e8098ec933e4fd7904d398606a2b0eaffb02b637869c5e7fda30db015ee92e","typeString":"literal_string \"Setting the same terms of service twice\""},"value":"Setting the same terms of service twice"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_85e8098ec933e4fd7904d398606a2b0eaffb02b637869c5e7fda30db015ee92e","typeString":"literal_string \"Setting the same terms of service twice\""}],"id":1971,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"3083:7:8","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":1976,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3083:104:8","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":1977,"nodeType":"ExpressionStatement","src":"3083:104:8"},{"expression":{"id":1980,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":1978,"name":"latestAcceptanceMessageHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1865,"src":"3197:27:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":1979,"name":"acceptanceMessageHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1955,"src":"3227:21:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"3197:51:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":1981,"nodeType":"ExpressionStatement","src":"3197:51:8"},{"expression":{"id":1984,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"id":1982,"name":"latestTermsOfServiceVersion","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1867,"src":"3258:27:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":1983,"name":"version","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1953,"src":"3288:7:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},"src":"3258:37:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},"id":1985,"nodeType":"ExpressionStatement","src":"3258:37:8"},{"expression":{"id":1990,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"id":1986,"name":"versions","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1863,"src":"3305:8:8","typeDescriptions":{"typeIdentifier":"t_mapping$_t_uint16_$_t_bytes32_$","typeString":"mapping(uint16 => bytes32)"}},"id":1988,"indexExpression":{"id":1987,"name":"version","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1953,"src":"3314:7:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"3305:17:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"id":1989,"name":"acceptanceMessageHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1955,"src":"3325:21:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"3305:41:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"id":1991,"nodeType":"ExpressionStatement","src":"3305:41:8"},{"eventCall":{"arguments":[{"id":1993,"name":"version","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1953,"src":"3382:7:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},{"id":1994,"name":"acceptanceMessageHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1955,"src":"3391:21:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"id":1995,"name":"acceptanceMessage","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1957,"src":"3414:17:8","typeDescriptions":{"typeIdentifier":"t_string_calldata_ptr","typeString":"string calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_uint16","typeString":"uint16"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_string_calldata_ptr","typeString":"string calldata"}],"id":1992,"name":"UpdateTermsOfService","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1875,"src":"3361:20:8","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_uint16_$_t_bytes32_$_t_string_memory_ptr_$returns$__$","typeString":"function (uint16,bytes32,string memory)"}},"id":1996,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3361:71:8","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":1997,"nodeType":"EmitStatement","src":"3356:76:8"}]},"documentation":{"id":1951,"nodeType":"StructuredDocumentation","src":"2615:221:8","text":" Update to the new terms of service version.\n We do not check whether acceptance message hash matches the message,\n as the message string here is just for the event log keeping."},"functionSelector":"49e28934","implemented":true,"kind":"function","modifiers":[{"id":1960,"kind":"modifierInvocation","modifierName":{"id":1959,"name":"onlyOwner","nameLocations":["2960:9:8"],"nodeType":"IdentifierPath","referencedDeclaration":31,"src":"2960:9:8"},"nodeType":"ModifierInvocation","src":"2960:9:8"}],"name":"updateTermsOfService","nameLocation":"2850:20:8","parameters":{"id":1958,"nodeType":"ParameterList","parameters":[{"constant":false,"id":1953,"mutability":"mutable","name":"version","nameLocation":"2878:7:8","nodeType":"VariableDeclaration","scope":1999,"src":"2871:14:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"},"typeName":{"id":1952,"name":"uint16","nodeType":"ElementaryTypeName","src":"2871:6:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},"visibility":"internal"},{"constant":false,"id":1955,"mutability":"mutable","name":"acceptanceMessageHash","nameLocation":"2895:21:8","nodeType":"VariableDeclaration","scope":1999,"src":"2887:29:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":1954,"name":"bytes32","nodeType":"ElementaryTypeName","src":"2887:7:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"},{"constant":false,"id":1957,"mutability":"mutable","name":"acceptanceMessage","nameLocation":"2934:17:8","nodeType":"VariableDeclaration","scope":1999,"src":"2918:33:8","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_string_calldata_ptr","typeString":"string"},"typeName":{"id":1956,"name":"string","nodeType":"ElementaryTypeName","src":"2918:6:8","typeDescriptions":{"typeIdentifier":"t_string_storage_ptr","typeString":"string"}},"visibility":"internal"}],"src":"2870:82:8"},"returnParameters":{"id":1961,"nodeType":"ParameterList","parameters":[],"src":"2970:0:8"},"scope":2109,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":2011,"nodeType":"FunctionDefinition","src":"3577:111:8","nodes":[],"body":{"id":2010,"nodeType":"Block","src":"3635:53:8","nodes":[],"statements":[{"expression":{"arguments":[{"expression":{"id":2006,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"3670:3:8","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":2007,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"3674:6:8","memberName":"sender","nodeType":"MemberAccess","src":"3670:10:8","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"}],"id":2005,"name":"canAddressProceed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2035,"src":"3652:17:8","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_address_$returns$_t_bool_$","typeString":"function (address) view returns (bool)"}},"id":2008,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3652:29:8","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"functionReturnParameters":2004,"id":2009,"nodeType":"Return","src":"3645:36:8"}]},"documentation":{"id":2000,"nodeType":"StructuredDocumentation","src":"3445:127:8","text":" Can the current user proceed to the next step, or they they need to sign\n the latest terms of service."},"functionSelector":"61b35163","implemented":true,"kind":"function","modifiers":[],"name":"canProceed","nameLocation":"3586:10:8","parameters":{"id":2001,"nodeType":"ParameterList","parameters":[],"src":"3596:2:8"},"returnParameters":{"id":2004,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2003,"mutability":"mutable","name":"accepted","nameLocation":"3625:8:8","nodeType":"VariableDeclaration","scope":2011,"src":"3620:13:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":2002,"name":"bool","nodeType":"ElementaryTypeName","src":"3620:4:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"3619:15:8"},"scope":2109,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":2035,"nodeType":"FunctionDefinition","src":"3816:251:8","nodes":[],"body":{"id":2034,"nodeType":"Block","src":"3895:172:8","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"id":2025,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2020,"name":"latestAcceptanceMessageHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1865,"src":"3913:27:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"BinaryOperation","operator":"!=","rightExpression":{"arguments":[{"hexValue":"30","id":2023,"isConstant":false,"isLValue":false,"isPure":true,"kind":"number","lValueRequested":false,"nodeType":"Literal","src":"3952:1:8","typeDescriptions":{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"},"value":"0"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_rational_0_by_1","typeString":"int_const 0"}],"id":2022,"isConstant":false,"isLValue":false,"isPure":true,"lValueRequested":false,"nodeType":"ElementaryTypeNameExpression","src":"3944:7:8","typeDescriptions":{"typeIdentifier":"t_type$_t_bytes32_$","typeString":"type(bytes32)"},"typeName":{"id":2021,"name":"bytes32","nodeType":"ElementaryTypeName","src":"3944:7:8","typeDescriptions":{}}},"id":2024,"isConstant":false,"isLValue":false,"isPure":true,"kind":"typeConversion","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3944:10:8","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"3913:41:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"5465726d73206f662073657276696365206e6f7420696e697469616c69736564","id":2026,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"3956:34:8","typeDescriptions":{"typeIdentifier":"t_stringliteral_b9a8ad693dfd4d3284f38815b40d2e172d0d45be8d620d0750cd503f08a8a5e3","typeString":"literal_string \"Terms of service not initialised\""},"value":"Terms of service not initialised"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_b9a8ad693dfd4d3284f38815b40d2e172d0d45be8d620d0750cd503f08a8a5e3","typeString":"literal_string \"Terms of service not initialised\""}],"id":2019,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"3905:7:8","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":2027,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"3905:86:8","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":2028,"nodeType":"ExpressionStatement","src":"3905:86:8"},{"expression":{"arguments":[{"id":2030,"name":"sender","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2014,"src":"4024:6:8","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":2031,"name":"latestAcceptanceMessageHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1865,"src":"4032:27:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"}],"id":2029,"name":"hasAcceptedHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1907,"src":"4008:15:8","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_address_$_t_bytes32_$returns$_t_bool_$","typeString":"function (address,bytes32) view returns (bool)"}},"id":2032,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4008:52:8","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"functionReturnParameters":2018,"id":2033,"nodeType":"Return","src":"4001:59:8"}]},"baseFunctions":[1833],"documentation":{"id":2012,"nodeType":"StructuredDocumentation","src":"3694:117:8","text":" Can a user proceed to the next step, or they they need to sign\n the latest terms of service."},"functionSelector":"5053b563","implemented":true,"kind":"function","modifiers":[],"name":"canAddressProceed","nameLocation":"3825:17:8","parameters":{"id":2015,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2014,"mutability":"mutable","name":"sender","nameLocation":"3851:6:8","nodeType":"VariableDeclaration","scope":2035,"src":"3843:14:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":2013,"name":"address","nodeType":"ElementaryTypeName","src":"3843:7:8","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"}],"src":"3842:16:8"},"returnParameters":{"id":2018,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2017,"mutability":"mutable","name":"accepted","nameLocation":"3885:8:8","nodeType":"VariableDeclaration","scope":2035,"src":"3880:13:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"typeName":{"id":2016,"name":"bool","nodeType":"ElementaryTypeName","src":"3880:4:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"visibility":"internal"}],"src":"3879:15:8"},"scope":2109,"stateMutability":"view","virtual":false,"visibility":"public"},{"id":2090,"nodeType":"FunctionDefinition","src":"4752:586:8","nodes":[],"body":{"id":2089,"nodeType":"Block","src":"4874:464:8","nodes":[],"statements":[{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"id":2050,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"id":2048,"name":"hash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2040,"src":"4892:4:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"id":2049,"name":"latestAcceptanceMessageHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1865,"src":"4900:27:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"src":"4892:35:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"43616e6e6f74207369676e206f6c646572206f7220756e6b6e6f776e2076657273696f6e73207465726d73206f66207365727669636573","id":2051,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"4929:57:8","typeDescriptions":{"typeIdentifier":"t_stringliteral_a041ce8d408344aed3d0fdc91690c3ac0035dca660cdd8491c342248a932f2a4","typeString":"literal_string \"Cannot sign older or unknown versions terms of services\""},"value":"Cannot sign older or unknown versions terms of services"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_a041ce8d408344aed3d0fdc91690c3ac0035dca660cdd8491c342248a932f2a4","typeString":"literal_string \"Cannot sign older or unknown versions terms of services\""}],"id":2047,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"4884:7:8","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":2052,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4884:103:8","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":2053,"nodeType":"ExpressionStatement","src":"4884:103:8"},{"expression":{"arguments":[{"arguments":[{"id":2057,"name":"hash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2040,"src":"5032:4:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"id":2058,"name":"signature","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2042,"src":"5038:9:8","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}],"expression":{"id":2055,"name":"signer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2038,"src":"5005:6:8","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"id":2056,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5012:19:8","memberName":"isValidSignatureNow","nodeType":"MemberAccess","referencedDeclaration":797,"src":"5005:26:8","typeDescriptions":{"typeIdentifier":"t_function_internal_view$_t_address_$_t_bytes32_$_t_bytes_memory_ptr_$returns$_t_bool_$attached_to$_t_address_$","typeString":"function (address,bytes32,bytes memory) view returns (bool)"}},"id":2059,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5005:43:8","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"5369676e6174757265206973206e6f742076616c6964","id":2060,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"5050:24:8","typeDescriptions":{"typeIdentifier":"t_stringliteral_5482edd09fd5040631ef4b51e73f53323e29bc91c9d64b969ac54702b05cf16b","typeString":"literal_string \"Signature is not valid\""},"value":"Signature is not valid"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_5482edd09fd5040631ef4b51e73f53323e29bc91c9d64b969ac54702b05cf16b","typeString":"literal_string \"Signature is not valid\""}],"id":2054,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"4997:7:8","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":2061,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"4997:78:8","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":2062,"nodeType":"ExpressionStatement","src":"4997:78:8"},{"expression":{"arguments":[{"commonType":{"typeIdentifier":"t_bool","typeString":"bool"},"id":2070,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftExpression":{"baseExpression":{"baseExpression":{"id":2064,"name":"acceptances","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1859,"src":"5093:11:8","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_bytes32_$_t_bool_$_$","typeString":"mapping(address => mapping(bytes32 => bool))"}},"id":2066,"indexExpression":{"id":2065,"name":"signer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2038,"src":"5105:6:8","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"5093:19:8","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_bool_$","typeString":"mapping(bytes32 => bool)"}},"id":2068,"indexExpression":{"id":2067,"name":"latestAcceptanceMessageHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1865,"src":"5113:27:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"5093:48:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"BinaryOperation","operator":"==","rightExpression":{"hexValue":"66616c7365","id":2069,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"5145:5:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"false"},"src":"5093:57:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},{"hexValue":"416c7265616479207369676e6564","id":2071,"isConstant":false,"isLValue":false,"isPure":true,"kind":"string","lValueRequested":false,"nodeType":"Literal","src":"5152:16:8","typeDescriptions":{"typeIdentifier":"t_stringliteral_988ed7cc4955768d49d35b181a2bc2b0514174494b33f90da8e2fba3c967c228","typeString":"literal_string \"Already signed\""},"value":"Already signed"}],"expression":{"argumentTypes":[{"typeIdentifier":"t_bool","typeString":"bool"},{"typeIdentifier":"t_stringliteral_988ed7cc4955768d49d35b181a2bc2b0514174494b33f90da8e2fba3c967c228","typeString":"literal_string \"Already signed\""}],"id":2063,"name":"require","nodeType":"Identifier","overloadedDeclarations":[-18,-18],"referencedDeclaration":-18,"src":"5085:7:8","typeDescriptions":{"typeIdentifier":"t_function_require_pure$_t_bool_$_t_string_memory_ptr_$returns$__$","typeString":"function (bool,string memory) pure"}},"id":2072,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5085:84:8","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":2073,"nodeType":"ExpressionStatement","src":"5085:84:8"},{"expression":{"id":2080,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"leftHandSide":{"baseExpression":{"baseExpression":{"id":2074,"name":"acceptances","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1859,"src":"5179:11:8","typeDescriptions":{"typeIdentifier":"t_mapping$_t_address_$_t_mapping$_t_bytes32_$_t_bool_$_$","typeString":"mapping(address => mapping(bytes32 => bool))"}},"id":2077,"indexExpression":{"id":2075,"name":"signer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2038,"src":"5191:6:8","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":false,"nodeType":"IndexAccess","src":"5179:19:8","typeDescriptions":{"typeIdentifier":"t_mapping$_t_bytes32_$_t_bool_$","typeString":"mapping(bytes32 => bool)"}},"id":2078,"indexExpression":{"id":2076,"name":"latestAcceptanceMessageHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1865,"src":"5199:27:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"isConstant":false,"isLValue":true,"isPure":false,"lValueRequested":true,"nodeType":"IndexAccess","src":"5179:48:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"nodeType":"Assignment","operator":"=","rightHandSide":{"hexValue":"74727565","id":2079,"isConstant":false,"isLValue":false,"isPure":true,"kind":"bool","lValueRequested":false,"nodeType":"Literal","src":"5230:4:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"},"value":"true"},"src":"5179:55:8","typeDescriptions":{"typeIdentifier":"t_bool","typeString":"bool"}},"id":2081,"nodeType":"ExpressionStatement","src":"5179:55:8"},{"eventCall":{"arguments":[{"id":2083,"name":"signer","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2038,"src":"5256:6:8","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":2084,"name":"latestTermsOfServiceVersion","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1867,"src":"5264:27:8","typeDescriptions":{"typeIdentifier":"t_uint16","typeString":"uint16"}},{"id":2085,"name":"latestAcceptanceMessageHash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1865,"src":"5293:27:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"id":2086,"name":"metadata","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2044,"src":"5322:8:8","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_uint16","typeString":"uint16"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}],"id":2082,"name":"Signed","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":1885,"src":"5249:6:8","typeDescriptions":{"typeIdentifier":"t_function_event_nonpayable$_t_address_$_t_uint16_$_t_bytes32_$_t_bytes_memory_ptr_$returns$__$","typeString":"function (address,uint16,bytes32,bytes memory)"}},"id":2087,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5249:82:8","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":2088,"nodeType":"EmitStatement","src":"5244:87:8"}]},"baseFunctions":[1844],"documentation":{"id":2036,"nodeType":"StructuredDocumentation","src":"4073:674:8","text":" Sign terms of service\n - Externally Owned Account sign\n - EIP-1271 sign\n - EIP-191 formatted message\n The user can sign multiple times.\n See\n - ECDSA tryRecover https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/cryptography/ECDSA.sol\n - Gnosis Safe signing example: https://github.com/safe-global/safe-eth-py/blob/master/gnosis/safe/tests/test_safe_signature.py#L195\n - OpenZeppelin SignatureChecker implementation: https://github.com/OpenZeppelin/openzeppelin-contracts/blob/master/contracts/utils/cryptography/SignatureChecker.sol"},"functionSelector":"5f145fb7","implemented":true,"kind":"function","modifiers":[],"name":"signTermsOfServiceBehalf","nameLocation":"4761:24:8","parameters":{"id":2045,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2038,"mutability":"mutable","name":"signer","nameLocation":"4794:6:8","nodeType":"VariableDeclaration","scope":2090,"src":"4786:14:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"},"typeName":{"id":2037,"name":"address","nodeType":"ElementaryTypeName","src":"4786:7:8","stateMutability":"nonpayable","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},"visibility":"internal"},{"constant":false,"id":2040,"mutability":"mutable","name":"hash","nameLocation":"4810:4:8","nodeType":"VariableDeclaration","scope":2090,"src":"4802:12:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":2039,"name":"bytes32","nodeType":"ElementaryTypeName","src":"4802:7:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"},{"constant":false,"id":2042,"mutability":"mutable","name":"signature","nameLocation":"4831:9:8","nodeType":"VariableDeclaration","scope":2090,"src":"4816:24:8","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes"},"typeName":{"id":2041,"name":"bytes","nodeType":"ElementaryTypeName","src":"4816:5:8","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"},{"constant":false,"id":2044,"mutability":"mutable","name":"metadata","nameLocation":"4857:8:8","nodeType":"VariableDeclaration","scope":2090,"src":"4842:23:8","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes"},"typeName":{"id":2043,"name":"bytes","nodeType":"ElementaryTypeName","src":"4842:5:8","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"}],"src":"4785:81:8"},"returnParameters":{"id":2046,"nodeType":"ParameterList","parameters":[],"src":"4874:0:8"},"scope":2109,"stateMutability":"nonpayable","virtual":false,"visibility":"public"},{"id":2108,"nodeType":"FunctionDefinition","src":"5344:183:8","nodes":[],"body":{"id":2107,"nodeType":"Block","src":"5447:80:8","nodes":[],"statements":[{"expression":{"arguments":[{"expression":{"id":2100,"name":"msg","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":-15,"src":"5482:3:8","typeDescriptions":{"typeIdentifier":"t_magic_message","typeString":"msg"}},"id":2101,"isConstant":false,"isLValue":false,"isPure":false,"lValueRequested":false,"memberLocation":"5486:6:8","memberName":"sender","nodeType":"MemberAccess","src":"5482:10:8","typeDescriptions":{"typeIdentifier":"t_address","typeString":"address"}},{"id":2102,"name":"hash","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2092,"src":"5494:4:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},{"id":2103,"name":"signature","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2094,"src":"5500:9:8","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}},{"id":2104,"name":"metadata","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2096,"src":"5511:8:8","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}}],"expression":{"argumentTypes":[{"typeIdentifier":"t_address","typeString":"address"},{"typeIdentifier":"t_bytes32","typeString":"bytes32"},{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"},{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes calldata"}],"id":2099,"name":"signTermsOfServiceBehalf","nodeType":"Identifier","overloadedDeclarations":[],"referencedDeclaration":2090,"src":"5457:24:8","typeDescriptions":{"typeIdentifier":"t_function_internal_nonpayable$_t_address_$_t_bytes32_$_t_bytes_calldata_ptr_$_t_bytes_calldata_ptr_$returns$__$","typeString":"function (address,bytes32,bytes calldata,bytes calldata)"}},"id":2105,"isConstant":false,"isLValue":false,"isPure":false,"kind":"functionCall","lValueRequested":false,"nameLocations":[],"names":[],"nodeType":"FunctionCall","src":"5457:63:8","tryCall":false,"typeDescriptions":{"typeIdentifier":"t_tuple$__$","typeString":"tuple()"}},"id":2106,"nodeType":"ExpressionStatement","src":"5457:63:8"}]},"functionSelector":"3f3dea15","implemented":true,"kind":"function","modifiers":[],"name":"signTermsOfServiceOwn","nameLocation":"5353:21:8","parameters":{"id":2097,"nodeType":"ParameterList","parameters":[{"constant":false,"id":2092,"mutability":"mutable","name":"hash","nameLocation":"5383:4:8","nodeType":"VariableDeclaration","scope":2108,"src":"5375:12:8","stateVariable":false,"storageLocation":"default","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"},"typeName":{"id":2091,"name":"bytes32","nodeType":"ElementaryTypeName","src":"5375:7:8","typeDescriptions":{"typeIdentifier":"t_bytes32","typeString":"bytes32"}},"visibility":"internal"},{"constant":false,"id":2094,"mutability":"mutable","name":"signature","nameLocation":"5404:9:8","nodeType":"VariableDeclaration","scope":2108,"src":"5389:24:8","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes"},"typeName":{"id":2093,"name":"bytes","nodeType":"ElementaryTypeName","src":"5389:5:8","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"},{"constant":false,"id":2096,"mutability":"mutable","name":"metadata","nameLocation":"5430:8:8","nodeType":"VariableDeclaration","scope":2108,"src":"5415:23:8","stateVariable":false,"storageLocation":"calldata","typeDescriptions":{"typeIdentifier":"t_bytes_calldata_ptr","typeString":"bytes"},"typeName":{"id":2095,"name":"bytes","nodeType":"ElementaryTypeName","src":"5415:5:8","typeDescriptions":{"typeIdentifier":"t_bytes_storage_ptr","typeString":"bytes"}},"visibility":"internal"}],"src":"5374:65:8"},"returnParameters":{"id":2098,"nodeType":"ParameterList","parameters":[],"src":"5447:0:8"},"scope":2109,"stateMutability":"nonpayable","virtual":false,"visibility":"public"}],"abstract":false,"baseContracts":[{"baseName":{"id":1847,"name":"Ownable","nameLocations":["693:7:8"],"nodeType":"IdentifierPath","referencedDeclaration":112,"src":"693:7:8"},"id":1848,"nodeType":"InheritanceSpecifier","src":"693:7:8"},{"baseName":{"id":1849,"name":"ITermsOfService","nameLocations":["702:15:8"],"nodeType":"IdentifierPath","referencedDeclaration":1845,"src":"702:15:8"},"id":1850,"nodeType":"InheritanceSpecifier","src":"702:15:8"}],"canonicalName":"TermsOfService","contractDependencies":[],"contractKind":"contract","documentation":{"id":1846,"nodeType":"StructuredDocumentation","src":"543:122:8","text":" Terms of service acceptance tracker\n Manage signatures of users of different versions of terms of service."},"fullyImplemented":true,"linearizedBaseContracts":[2109,1845,112,156],"name":"TermsOfService","nameLocation":"675:14:8","scope":2110,"usedErrors":[],"usedEvents":[13,1875,1885]}],"license":"GPL-3.0"},"id":8}